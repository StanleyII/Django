DROP TABLE IF EXISTS films;
DROP TABLE IF EXISTS genres;

CREATE TABLE IF NOT EXISTS genres (
	genre_id SERIAL PRIMARY KEY,
	name_genre VARCHAR(50) NOT NULL UNIQUE,
	translation VARCHAR(50) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS films (
	film_id SERIAL PRIMARY KEY,
	title TEXT NOT NULL CHECK(LENGTH(title) > 0),
	genre_id INTEGER NOT NULL,
	country VARCHAR(50) NOT NULL CHECK(LENGTH(country) > 0) DEFAULT 'Неизвестно',
	director VARCHAR(30) NOT NULL CHECK(LENGTH(director) > 0) DEFAULT 'Неизвестно',
	actors TEXT NOT NULL DEFAULT 'Без описания',
	description TEXT NOT NULL DEFAULT 'Без описания',
	rating NUMERIC(3,2) NOT NULL CHECK(rating BETWEEN 0 and 10) DEFAULT 0,
	cover VARCHAR(100) NOT NULL CHECK(LENGTH(cover) > 0) DEFAULT '0',
	count INTEGER NOT NULL CHECK(count > -1) DEFAULT 0,
	FOREIGN KEY(genre_id)
        REFERENCES genres(genre_id)
            ON DELETE NO ACTION
);

INSERT INTO genres (name_genre, translation)
VALUES ('комедия', 'comedy'),
('ужасы', 'horrors'),
('фантастика', 'fantastic'),
('триллер', 'thriller'),
('боевик', 'action'),
('мелодрама', 'melodrama'),
('детектив', 'detective'),
('приключения', 'advetures'),
('драма', 'drama'),
('криминал', 'crime');

INSERT INTO films (title, genre_id, country, director, description, rating, cover, actors)
VALUES ('Темный рыцарь', 2, 'США', 'Кристофер Нолан', 'Бэтмен поднимает ставки в войне с криминалом. С помощью лейтенанта Джима Гордона и прокурора Харви Дента он намерен очистить улицы Готэма от преступности. Сотрудничество оказывается эффективным, но скоро они обнаружат себя посреди хаоса, развязанного восходящим криминальным гением, известным напуганным горожанам под именем Джокер.', 8.5, 1, 'Кристиан Бэйл, Хит Леджер, Аарон Экхарт, Мэгги Джилленхол, Майкл Кейн, Морган Фримен'),
('Ярость', 9, 'США', 'Дэвид Эйр', 'Стоит апрель 1945 года, и победа над немцами уже близка: союзники уверенно продвигаются вглубь вражеской территории, и оказываемое им сопротивление становится слабее день ото дня. Это, однако, совсем не значит, что на пути к победе союзные войска не потеряют еще множество людей, и многие солдаты сознают, что смерть ждет на расстоянии вытянутой руки. Среди закаленных в бою пессимистов, каждый день ведущих ожесточенные бои во имя победы, экипаж танка, на чьем дуле намалевано слово «Ярость».', 7.4, 2, 'Брэд Питт, Шайа ЛаБаф, Логан Лерман, Майкл Пенья, Джейсон Айзекс, Джон Бернтал, Скотт Иствуд, Ксавьер Сэмюэл'),
('Джокер', 10, 'Канада', 'Тодд Филлипс', 'Готэм, начало 1980-х годов. Комик Артур Флек живет с больной матерью, которая с детства учит его «ходить с улыбкой». Пытаясь нести в мир хорошее и дарить людям радость, Артур сталкивается с человеческой жестокостью и постепенно приходит к выводу, что этот мир получит от него не добрую улыбку, а ухмылку злодея Джокера.', 8.0, 3, 'Хоакин Феникс, Роберт Де Ниро, Зази Битц, Фрэнсис Конрой,  Бретт Каллен, Билл Кэмп, Шей Уигем, Гленн Флешлер'),
('Легенда', 4, 'Великобритания', 'Брайан Хелгеленд', 'Близнецы Реджи и Ронни Крэй — культовые фигуры преступного мира Великобритании 1960-х. Братья возглавляли самую влиятельную бандитскую группировку Ист-Энда. В их послужном списке были вооруженные грабежи, рэкет, поджоги, покушения, убийства и собственный ночной клуб, куда доезжали даже голливудские знаменитости. Среди их жертв — криминальные авторитеты Джек МакВитти и Джордж Корнелл.', 7.2, 4, 'Том Харди, Тэрон Эджертон, Эмили Браунинг, Колин Морган, Кристофер Экклестон, Дэвид Тьюлис, Пол Андерсон, Тара Фицджералд, Чазз Палминтери'),
('Звездные войны: Эпизод 1 - Скрытая угроза', 3, 'США', 'Джордж Лукас', 'Мирная и процветающая планета Набу. Торговая федерация, не желая платить налоги, вступает в прямой конфликт с королевой Амидалой, правящей на планете, что приводит к войне. На стороне королевы и республики в ней участвуют два рыцаря-джедая: учитель и ученик, Квай-Гон-Джин и Оби-Ван Кеноби.', 7.9, 5, 'Лиам Нисон, Юэн МакГрегор, Натали Портман, Джейк Ллойд, Иен Макдермид, Рэй Парк, Сэмюэл Л. Джексон, Ахмед Бест'),
('Зеленая миля', 9, 'США', 'Фрэнк Дарабонт', 'Пол Эджкомб — начальник блока смертников в тюрьме «Холодная гора», каждый из узников которого однажды проходит «зеленую милю» по пути к месту казни. Пол повидал много заключённых и надзирателей за время работы. Однако гигант Джон Коффи, обвинённый в страшном преступлении, стал одним из самых необычных обитателей блока.', 9.1, 10, 'Том Хэнкс, Дэвид Морс, Бонни Хант, Майкл Кларк Дункан, Джеймс Кромуэлл, Майкл Джитер, Грэм Грин, Даг Хатчинсон'),
('Леон', 5, 'Франция', 'Люк Бессон', 'Профессиональный убийца Леон неожиданно для себя самого решает помочь 12-летней соседке Матильде, семью которой убили коррумпированные полицейские.', 8.7, 11, 'Жан Рено, Натали Портман, Гари Олдман, Дэнни Айелло, Питер Эппел, Уилли Уан Блад, Дон Крич, Кит А. Гласко'),
('Джентльмены удачи', 1, 'СССР', 'Александр Серый', 'Заведующему детсадом Трошкину фатально не повезло: он оказался как две капли воды похож на бандита по кличке «Доцент», похитившего уникальный шлем Александра Македонского. Милиция внедряет добряка Трошкина в воровскую среду - и ему ничего не остается, кроме как старательно изображать своего двойника-злодея, путая всех окружающих. Со временем он настолько блестяще входит в роль, что сам начинает порой приходить в ужас. Между тем, жизни его угрожает смертельная опасность...', 8.6, 12, 'Евгений Леонов, Георгий Вицин, Раднэр Муратов, Савелий Крамаров, Наталья Фатеева, Эраст Гарин, Николай Олямин, Анатолий Папанов, Любовь Соколова'),
('Отступники', 10, 'США', 'Мартин Скорсезе', 'Два лучших выпускника полицейской академии оказались по разные стороны баррикады: один из них — агент мафии в рядах правоохранительных органов, другой — «крот», внедрённый в мафию. Каждый считает своим долгом обнаружить и уничтожить противника.', 8.5, 13, 'Леонардо ДиКаприо, Мэтт Дэймон, Джек Николсон, Марк Уолберг, Мартин Шин, Рэй Уинстон, Вера Фармига, Энтони Андерсон, Алек Болдуин'),
('Девчата', 6, 'СССР', 'Юрий Чулюкин', 'В сибирский поселок приехала юная повариха Тося Кислицына — наивная и эксцентричная девчонка. Она сует свой нос во все дела, каждому стремится помочь. Местный красавец Илья на спор заводит с Тосей роман.', 8.4, 14, 'Надежда Румянцева, Николай Рыбников, Люсьена Овчинникова, Станислав Хитров, Инна Макарова, Светлана Дружинина, Нина Меньшикова, Роман Филиппов, Михаил Пуговкин, Анатолий Адоскин'),
('Пианист', 9, 'Франция', 'Роман Полански', 'Фильм снят по автобиографии Владислава Шпильмана, одного из лучших пианистов Польши 30-х годов прошлого века. Главный герой фильма — Владек — занимается искусством до тех пор, пока территорию Польши не занимают нацисты. Жизнь всех евреев меняется: их помещают в Варшавское гетто, запрещают работать, унижают, заставляют носить отличительные повязки, а через некоторое время отправляют в концлагерь.', 8.5, 15, 'Эдриан Броуди, Эмилия Фокс, Даниэль Кальтаджироне, Эд Стоппард, Морин Липман, Фрэнк Финлей, Джессика Кейт Мейер, Джулия Рейнер, Томас Кречман, Михал Жебровский'),
('Семь', 4, 'США', 'Дэвид Финчер', 'Детектив Уильям Сомерсет - ветеран уголовного розыска, мечтающий уйти на пенсию и уехать подальше от города и грешных обитателей. За 7 дней до пенсии на Сомерсета сваливаются две неприятности: молодой напарник Миллс и особо изощренное убийство. Острый ум опытного сыщика сразу определяет, что за этим преступлением, скорее всего, последуют другие. Новости подтверждают его догадку. Поняв, что убийца наказывает свои жертвы за совершенные ими смертные грехи, детектив встает перед выбором: вернуться к работе либо уйти и передать дело своему менее опытному напарнику?', 8.4, 16, 'Брэд Питт, Морган Фриман, Гвинет Пэлтроу, Кевин Спейси, Р. Ли Эрми, Ричард Шифф, Ричард Раундтри, Рег Ю. Кэти'),
('Лекарь: Ученик Авиценны', 8, 'Германия', 'Филипп Штёльцль', 'Англия, XI век. Мать десятилетнего Роба Коула умирает в страшных мучениях: никто не знает ни природы её болезни, ни лекарства против неё. Маленький Роб, потрясенный до глубины души, во что бы то ни стало стремится разгадать эту тайну. Ему суждено пройти долгий путь, от Англии до Персии, его учителями становятся сначала обыкновенный шарлатан Барбер, а потом - великий лекарь Авиценна. Мудрый учитель видит в Робе необыкновенный талант к медицине, но советует ему не спешить делать вещи, которые не соответствуют веку. Но Роб ни перед чем не останавливается в своем желании научиться спасать людей от смерти, и над его собственной жизнью нависает угроза, ведь он дважды пошел против предрассудков: использовал для научных исследований тело человека и полюбил женщину, отданную в жены другому.', 8.0, 17, 'Том Пэйн, Бен Кингсли, Эмма Ригби, Оливье Мартинес, Майкл Джибсон, Стэнли Таунсенд, Майкл Маркус Морган, Адам Томас Райт'),
('Балканский рубеж', 5, 'Россия', 'Андрей Волгин', 'Югославия. 1999 год. Российская спецгруппа получает приказ взять под контроль аэродром Слатина в Косово и удерживать его до прихода подкрепления. Но этот стратегический объект крайне важен албанскому полевому командиру и натовским генералам. Группа вынуждена принять неравный бой с террористами. К аэродрому устремляются российские миротворцы и силы НАТО. Мир вновь близок к большой войне.', 8.0, 18, 'Антон Пампушный, Гоша Куценко, Милош Бикович, Милена Радулович, Гойко Митич, Равшана Куркова, Дмитрий Фрид, Кирилл Полухин, Сергей Марин'),
('Молчание ягнят', 7, 'США', 'Джонатан Демме', 'Психопат похищает и убивает молодых женщин по всему Среднему Западу. ФБР, уверенное, что все преступления совершены одним и тем же человеком, поручает агенту Клариссе Старлинг встретиться с заключенным-маньяком Ганнибалом Лектером, который мог бы помочь составить психологический портрет убийцы. Сам Лектер отбывает наказание за убийства и каннибализм. Он согласен помочь Клариссе лишь в том случае, если она попотчует его больное воображение подробностями своей личной жизни.', 8.3, 19, 'Джоди Фостер, Энтони Хопкинс, Брук Смит, Скотт Гленн, Тед Левайн, Энтони Хилд, Кейси Леммонс, Роджер Корман, Дайан Бэйкер'),
('Красный Дракон', 7, 'США', 'Бретт Рэтнер', 'Агент ФБР Уилл Грэм получает тяжелые ранения при исполнении и покидает службу. Но через несколько лет его втягивают в новое расследование — в городе появился серийный убийца, которого пресса окрестила как Зубная фея. Чтобы поймать маньяка, Грэму приходится обратиться за помощью к Ганнибалу Лектеру.', 7.8, 20, 'Энтони Хопкинс, Эдвард Нортон, Рэйф Файнс, Харви Кейтель, Эмили Уотсон, Мэри-Луиз Паркер, Филип Сеймур Хоффман, Энтони Хилд, Кен Люн, Фрэнки Фэйзон'),
('Ганнибал', 7, 'США', 'Ридли Скотт', 'После десяти лет молчания Ганнибал Лектер пишет письмо агенту ФБР Клариссе Старлинг, предлагая ей возобновить их прервавшуюся интеллектуальную дуэль. С помощью миллионера Мейсона Верджера, ставшего очередной жертвой безумного доктора и мечтающего теперь скормить Лектера стае прожорливых кабанов, Кларисса выходит на след неуловимого маньяка и вскоре узнаёт, что за ним уже охотится инспектор флорентийской полиции Ринальдо Пацци.', 7.8, 21, 'Энтони Хопкинс, Джулианна Мур, Гари Олдман, Рэй Лиотта, Джанкарло Джаннини, Фрэнки Фэйзон, Франческа Нери, Желько Иванек, Хазелль Гудман, Дэвид Эндрюс'),
('Пираты Карибского моря: На краю света', 8, 'США', 'Гор Вербински', 'Новые приключения Джека Воробья и его друзей Уилла Тернера и Элизабет Суонн. На этот раз Уиллу и Элизабет придется объединиться с самим Капитаном Барбоссой для того, чтобы отправиться на край света и спасти своего друга — Джека. Ситуация осложняется тем, что Элизабет попадает к сингапурским пиратам…', 8.1, 22, 'Джонни Депп, Джеффри Раш, Орландо Блум, Кира Найтли, Том Холландер, Билл Найи, Стеллан Скарсгард, Наоми Харрис, Джек Девенпорт'),
('Одинокий рейнджер', 8, 'США', 'Гор Вербински', 'История блюстителя закона Джона Рида, который с помощью индейца Тонто стал легендарным мстителем в маске, стоящим на защите справедливости. Тонто с юмором и небылицами повествует о тех приключениях, которые пришлось пережить двум непохожим друг на друга героям, сведенным судьбой для того, чтобы вместе сражаться против общего врага. Им приходится противостоять жадности и коррупции во времена, когда появление первых железных дорог изменило представление о власти и могуществе в мире.', 6.8, 23, 'Джонни Депп, Арми Хаммер, Том Уилкинсон, Уильям Фихтнер, Рут Уилсон, Барри Пеппер, Хелена Бонем Картер, Брайант Принц, Стивен Рут, Леон Риппи'),
('Чужой', 2, 'Великобритания', 'Ридли Скотт', 'В далеком будущем возвращающийся на Землю грузовой космический корабль перехватывает исходящий с неизвестной планеты сигнал. Экипаж, в соответствии с основными инструкциями, обязан найти и исследовать источник сигнала. Оказавшись на планете, астронавты повсюду обнаруживают предметы, по виду напоминающие гигантские коконы.', 8.1, 24, 'Сигурни Уивер, Том Скеррит, Иэн Холм, Джон Хёрт, Гарри Дин Стэнтон, Вероника Картрайт, Яфет Котто, Боладжо Бадеджо, Хелен Хортон, Эдди Пауэлл'),
('Нечто', 2, 'США', 'Джон Карпентер', 'Команде ученых американской исследовательской станции в Антарктике предстоит столкнуться с необъяснимым кошмаром. Отрезанные от остального мира полярники вступают в схватку с инопланетной тварью, способной принимать обличье земных существ.', 7.9, 25, 'Курт Рассел, Кит Дэвид, Уилфорд Бримли, Т. К. Картер, Дэвид Кленнон, Ричард А. Дайсарт, Чарльз Хэллахан, Питер Мэлоуни, Ричард Мейсер, Дональд Моффет'),
('Пила: Игра на выживание', 2, 'США', 'Джеймс Ван', 'Два незнакомца просыпаются в подвале, где лежит человек с простреленной головой и пистолетом в руке. Они прикованы к стенам цепями и не помнят, как тут оказались. Голос с найденной плёнки велит одному из них выбрать — убить товарища по несчастью или дать умереть своим жене и дочери. Так начинается жестокая игра, у невольных участников которой есть всего лишь 7 часов.', 7.8, 26, 'Ли Уоннелл, Кэри Элвес, Дэнни Гловер, Моника Поттер, Тобин Белл, Дина Мейер, Кен Люн, Майкл Эмерсон, Шоуни Смит, Бенито Мартинес'),
('Драйв', 5, 'США', 'Стив Ван', 'В порт Сан-Франциско из Гонконга прибывает грузовое судно, с загадочным пассажиром по имени Тоби Вонг на борту. Он бежит от корпорации Леунг, в поисках свободы в США. Однако Тоби преследует наемник Вик Мэдисон со своей командой по заданию мистера Лао, главы Леунг.', 7.3, 27, 'Марк Дакаскос, Кадим Хардисон, Джон Пайпер-Фергюсон, Бриттани Мерфи, Трейси Уолтер, Джеймс Сигэта, Масая Като, Дом Магуили, Рон Юань, Клайв Розенгрен');